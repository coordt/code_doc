{% extends "code_doc/base_template.html" %}
{% load gravatar %}
{% load staticfiles %}
{% load static %}
{% load project_image %}
{% load markdown_filter %}

{% block title %}About MPI.IS documentation{% endblock %}


{% block content %}

{% markdown_tag %}



Welcome to [code_doc](https://bitbucket.org/renficiaud/code_doc) project!
============================

This server is meant 

* to make your projects available to the public or to specific groups and increase their visibility
* to store your wonderful documentation and binaries that you want to share with your team mates. 


----------------------------

[TOC]


----------------------------

What are the functionalities offered?
=====================================

* Possibility to upload or update documentation or artifact directly from a script: this make it convenient
  to plug `code_doc` to your prefered automated build system. The update is done in a push manner: the script 
  sends the artifact. 
* The uploaded documentation is not interpreted in any way: it is possible to upload an archive containing HTML files
  generated by any documentation tool (Doocbook, Doxygen, Matlab, Sphinx, etc.).
* Fine permissions management: you work on a private personal project, and you want to share the advance within a restricted group
  of people? Your project is public and you want to make it available to anyone? 
  `code_doc` meet these contraints which makes
  it particularly adapted to various kind of work environment. No need to set up different private servers for this: only one
  instance with the proper authorization on project and versions.  

----------------------------

Ready to set up?
================
You are certainly convinced by the usefulness (or necessity) of this web site. In the sequel, the three main objects
manipulated by `code_doc` will be detailed. 

### How to set up a project?

Now let's talk about configuration. The two ingredients are

* Defining a project
* Defining one or more version for this project

### Create a project
At the moment, creating a project is an admin priviledge, so you should ask your administrator to create a project for you.
 

### Create a version
You can create a new version if you have the proper credentials on the project. If so, a "+" button is active right to the "Version" header on the project page.


### Markdown format

[Markdown](http://daringfireball.net/projects/markdown/) is used all over the place using the python [markdown](http://pythonhosted.org/Markdown/index.html) 
extension and the code highlighter [pygments](http://pygments.org/). The best place to start is to look at [this page](http://daringfireball.net/projects/markdown/).   

To insert some code as explanation, you can do the following

    :::bash
    :::bash
    pip install my_package

If the block above is indented with 4 spaces, then Markdown interprets it as code with the designated language. You can also do

    #!bash
    #!bash
    pip install my_package

instead, and in this case the lines will be numbered. These code blocks can be nested with lists (the indentation then becomes 8 spaces).

----------------------------

# Automated update

One of the nice functionalities of *code doc* is to be able to push things on the server. This enables the 
update from a build server for instance.  

The following steps should be followed:

* have proper credentials that allows you to upload something on this server
* Download [the script]({% url 'script' %}) manually from here or automatically as follow:

        :::bash
        wget {{request.scheme}}://{{request.get_host}}{% url 'script' %} -O script.py
        
* Create a task in your build scheme that uploads the artifact. For regular artifacts (not documentation):

        :::bash
        python script.py -s {{request.scheme}}://{{request.get_host}} --username=user --password=pass \
               --project="project-name" --artifact_version="project-version" \
               -f filetosend.tar.bz2
  For documentation, you have to specify an additional flag and the main entry point of the documentation:
    
        :::bash
        python script.py -s {{request.scheme}}://{{request.get_host}} --username=$USER --password=$PASS \
               --project="project-name" --artifact_version="project-version" \
               --is_doc --doc_entry=my_tar_content/index.html \
               -f filetosend.tar.bz2 


blabla


[[https://code.is.localnet/{% url 'authors_list' %}]]
toto {{request.get_referer|urlize}}
tata {{request.build_absolute_uri|urlize}}
titi {{request.META.HTTP_HOST}}


    ::bash
    > wget {{request.scheme}}://{{request.get_host}}{% url 'authors_list' %}
    > python manage.py runserver
    
    blabla(2, 3)

This is cool 

    #!python

    class toto(object):
      pass


----------------------------

# Deployment

The deployment part is a bit out of scope of the current document, and is detailed on the wiki pages of the project. 



blababla [yaya][scripturl]

[scripturl]: {{request.build_absolute_uri}}{% url 'authors_list' %}

{% endmarkdown_tag %}

{% endblock %}
