{% extends "code_doc/base_template.html" %}
{% load static %}
{% load button_add_with_permission %}
{% load markdown_filter %}

{% block title %}{{ project.name }}{% endblock %}


{% block content %}
  <h1><a href="{% url 'project' project.id %}">{{ project.name }}</a> - {{series.series}} {% button_edit_series_with_permission user series %}</h1>

  <h3>Description</h3>
  {{series.description_mk|markd|safe}}

  <h3>Details</h3>

  <h3>Artifacts</h3>


  {% if artifacts %}

	  <table class="table table-hover">
	      <thead>
	        <tr>
	          <th>Id</th>
	          <th>Name</th>
	          <th>Label</th>
	          <th>MD5</th>
	          <th>Description</th>
	          <th>Upload date</th>
	          <th>Uploaded by</th>
	        </tr>
	      </thead>

	    <tbody>
	      {% for artifact in artifacts %}
	        <tr>
	          <td>{{artifact.pk}}</td>
	          <td class="text-nowrap"><small><a href="{%get_media_prefix%}{{artifact.artifactfile}}">{{artifact.filename}}</a></small></td>

            <td>
            {% if artifact.is_documentation %}
              <span class="label label-info">doc</span>
            {% endif %}
              {% if artifact.documentation_entry_file %}
                <a href="{%get_media_prefix%}{{artifact.get_documentation_url}}">read online</a>
              {% endif %}
            </td>
            <td><small><span style="font-family:monospace;">{{artifact.md5hash|upper}}</span></small></td>
	          <td><small>{{artifact.description}}</small></td>
	          <td><small>{{artifact.upload_date|date}}</small></td>
	          <td>{% if artifact.uploaded_by %}<small>{{artifact.uploaded_by}}</small>{%endif%}</td>

	        </tr>
	      {%endfor%}
	      <tr>
	        <th>{% button_add_artifact_with_permission user series %}</th>
	      </tr>
	    </tbody>
	  </table>

  {% else %}
      <p>No artifacts for this revision {{ series.series }}.</p>
      <p>{% button_add_artifact_with_permission user series %}</p>
  {% endif %}


{% endblock %}
